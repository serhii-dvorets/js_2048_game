parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"KIzB":[function(require,module,exports) {
"use strict";var e=Array.from(document.querySelectorAll(".field-cell")),t=new Array(16).fill(0),n=document.querySelector(".start"),o=document.querySelector(".game-score"),l=document.querySelector(".message-win"),i=document.querySelector(".message-lose"),r=document.querySelector(".message-start"),c=0,a={upMove:!0,downMove:!0,leftMove:!0,rightMove:!0};function f(){r.classList.add("hidden")}function s(){var e=t.filter(function(e){return e>0});a.downMove||a.upMove||a.leftMove||a.rightMove||16!==e.length||i.classList.remove("hidden")}function d(){n.classList.add("restart"),n.textContent="Restart",i.classList.add("hidden"),l.classList.add("hidden"),e.map(function(e){e.textContent="",e.className="field-cell"}),t.fill(0),c=0,o.textContent=0;var r,a=Math.floor(16*Math.random());do{r=Math.floor(16*Math.random())}while(a===r);e.map(function(n,o){o!==a&&o!==r||(t[o]=v(),e[o].textContent=t[o],n.className="field-cell field-cell--".concat(+n.textContent))}),n.removeEventListener(f)}function v(){return Math.floor(101*Math.random())<90?2:4}function u(){var n,o=[];t.map(function(e,t){e>0&&o.push(t)});do{n=Math.floor(16*Math.random())}while(o.includes(n));t[n]=v(),e[n].textContent=t[n],e[n].className="field-cell field-cell--".concat(t[n])}function h(n){for(var i=!1,r=!1,f=0;f<e.length;f++)if(f%4==0){var d=[t[f],t[f+1],t[f+2],t[f+3]],v=d.filter(function(e){return e>0});if("left"===n){for(var h=1;h<v.length;h++)if(v[h]===v[h-1]){var m=v[h]+v[h-1];if(2048===m)return void l.classList.remove("hidden");c+=m,o.textContent=c,v[h-1]=m,v[h]=0,v.splice(h,1),v.push(0)}}else for(var M=v.length-1;M>0;M--)if(v[M]===v[M-1]){var x=v[M]+v[M-1];if(2048===x)return void l.classList.remove("hidden");c+=x,o.textContent=c,v[M]=x,v[M-1]=0,v.splice([M-1],1),v.unshift(0)}var C=new Array(4-v.length).fill(0),g="left"===n?v.concat(C):C.concat(v);t[f]=g[0],t[f+1]=g[1],t[f+2]=g[2],t[f+3]=g[3],e[f].textContent=t[f],e[f+1].textContent=t[f+1],e[f+2].textContent=t[f+2],e[f+3].textContent=t[f+3],e[f].className="field-cell field-cell--".concat(e[f].textContent),e[f+1].className="field-cell field-cell--".concat(e[f+1].textContent),e[f+2].className="field-cell field-cell--".concat(e[f+2].textContent),e[f+3].className="field-cell field-cell--".concat(e[f+3].textContent),JSON.stringify(d)!==JSON.stringify(g)&&("left"===n?r=!0:i=!0)}"left"===n?r?(a.rightMove=!0,a.leftMove=!0,a.upMove=!0,a.downMove=!0,u()):(a.leftMove=!1,s()):i?(a.rightMove=!0,a.leftMove=!0,a.upMove=!0,a.downMove=!0,u()):(a.rightMove=!1,s())}function m(n){for(var i=!1,r=!1,f=3;f>=0;f--){var d=[t[f],t[f+4],t[f+8],t[f+12]],v=d.filter(function(e){return e>0});if("up"===n){for(var h=1;h<v.length;h++)if(v[h]===v[h-1]){var m=v[h]+v[h-1];if(2048===m)return void l.classList.remove("hidden");c+=m,o.textContent=c,v[h-1]=m,v[h]=0,v.splice(h,1),v.push(0)}}else for(var M=v.length-1;M>0;M--)if(v[M]===v[M-1]){var x=v[M]+v[M-1];if(2048===x)return void l.classList.remove("hidden");c+=x,o.textContent=c,v[M]=x,v[M-1]=0,v.splice([M-1],1),v.unshift(0)}var C=new Array(4-v.length).fill(0),g="up"===n?v.concat(C):C.concat(v);t[f]=g[0],t[f+4]=g[1],t[f+8]=g[2],t[f+12]=g[3],e[f].textContent=t[f],e[f+4].textContent=t[f+4],e[f+8].textContent=t[f+8],e[f+12].textContent=t[f+12],e[f].className="field-cell field-cell--".concat(e[f].textContent),e[f+4].className="field-cell field-cell--".concat(e[f+4].textContent),e[f+8].className="field-cell field-cell--".concat(e[f+8].textContent),e[f+12].className="field-cell field-cell--".concat(e[f+12].textContent),JSON.stringify(d)!==JSON.stringify(g)&&("up"===n?i=!0:r=!0)}"up"===n?i?(a.rightMove=!0,a.leftMove=!0,a.upMove=!0,a.downMove=!0,u()):(a.upMove=!1,s()):r?(a.rightMove=!0,a.leftMove=!0,a.upMove=!0,a.downMove=!0,u()):(a.downMove=!1,s())}document.addEventListener("keydown",function(e){"ArrowLeft"===e.key&&h("left"),"ArrowRight"===e.key&&h("right"),"ArrowUp"===e.key&&m("up"),"ArrowDown"===e.key&&m("down")}),n.addEventListener("click",f),n.addEventListener("click",d);
},{}]},{},["KIzB"], null)
//# sourceMappingURL=main.aba39707.js.map